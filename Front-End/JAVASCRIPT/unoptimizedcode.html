<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <h2>Unoptimized Dashboard</h2>
    <p>We can see the difference on conlsole via logs</p>

    <ul id="userList"></ul>
    <script>
        async function loadDashboard() {

            const timestart = performance.now();

            const [users, posts] = await Promise.all([
                fetch("https://jsonplaceholder.typicode.com/users").then(r => r.json()),
                fetch("https://jsonplaceholder.typicode.com/posts").then(r => r.json())

            ]);

            //No cache

            users.slice(0, 50).forEach(u => {
                //repeated DOM lookup for each item
                const list = document.getElementById("userList");
                const li = document.createElement("li");
                li.textContent = `${u.name} - ${u.email}`;
                list.appendChild(li); //causing many DOM Manipulations
            });

            const timestop = performance.now();

            console.log("Total time taken:" , Math.round(timestop - timestart));
            console.log("users: ", users.length, "Posts: ", posts.length);
        }

        loadDashboard();

    </script>
</body>

</html>